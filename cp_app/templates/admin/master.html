{% extends 'admin/base.html' %}

{% block head %}
  {{ super() }}
  <!-- Inline скрипт для немедленной установки темы -->
  <script>
    // Применяем тему ДО загрузки CSS
    (function() {
      try {
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
      } catch (e) {
        console.log('Theme initialization error:', e);
      }
    })();
  </script>
  
  <!-- Подключаем стили для темной темы админки -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_dark.css') }}" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
{% endblock %}

{% block access_control %}
  {{ super() }}
  <!-- Кнопка переключения темы в навбаре админки -->
  <div class="navbar-nav ml-auto">
    <button id="themeToggle" class="btn btn-outline-light btn-sm ml-2">
      <i class="bi bi-moon-fill"></i> Тёмная
    </button>
  </div>
{% endblock %}

{% block tail %}
  {{ super() }}
  <!-- Подключаем скрипт управления темами -->
  <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
{% endblock %}

